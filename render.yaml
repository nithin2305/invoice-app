# Render.com deployment configuration
# This file configures the backend deployment on Render's free tier
# Free tier includes:
# - 750 hours/month of compute
# - Automatic deploys from Git
# - Free PostgreSQL database (90-day retention on free tier)

services:
  - type: web
    name: invoice-backend
    runtime: docker
    dockerfilePath: ./backend/Dockerfile
    dockerContext: ./backend
    plan: free
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: DATABASE_URL
        fromDatabase:
          name: invoice-db
          property: connectionString
      - key: JAVA_OPTS
        value: "-Xmx256m -Xms128m"
    healthCheckPath: /api/health
    autoDeploy: true

databases:
  - name: invoice-db
    databaseName: invoicedb
    user: invoice_user
    plan: free
